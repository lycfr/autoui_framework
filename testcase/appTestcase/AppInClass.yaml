module: InClass
skip: false
input: [classname]
description: APPInClass,student语文-进入直播教室
steps:
  #点击语文课
  - click("//*[@text='语文课']")
  - sleep(3)
  #关闭mini播放器
  - ${isAudio} = check(com.dedao.juvenile:id/ivAudioClose)
  - if ${isAudio}:
    - click('com.dedao.juvenile:id/ivAudioClose')
  #滑动进入直播课
  - swipe(up)
  - sleep(3)
  #点击进行中模块下面的课程
  - click("//*[@text='进行中']/parent::*/following-sibling::*")
  #点击classname的名字
  - ${flag} = True
  - while ${flag}:
    - ${class_title} = $.getText("com.dedao.juvenile:id/tvClassTitle",-1)
    - if ${class_title} == ${classname}:
      - click("com.dedao.juvenile:id/tvClassTitle",-1)
      - ${flag} = False
    - else:
      - ${flag} = True
      - swipe(up)
  #判断进入教室成功+ppt加载成功
  - ${flag} = True
  - while ${flag}:
    #跳转到课程详情页面，点击进入教室
    - click("//*[@text='进入教室']")
    - sleep(5)
    - ${ppt} = compare_image(ppt-1.png)
    - if ${ppt} > 0.8:
        - log('学生端加载ppt成功')
        - ${flag} = False
    - else:
        #重新进出教室,
        - goBack
        - ${flag} = True