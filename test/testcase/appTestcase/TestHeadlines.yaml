module: TestHeadlines
description: 少年头条模块测试
input: []
output: []

methods:
    TestYoungWord:
        desc: 点击少年头条，进入头条列表进行文稿用例验证
        steps:
            - pages/app/AppYoungHeadlines.yaml/FirstVoice
            - ${isHeadtext} = $.getVar('isHeadtext')
            - assert ${isHeadtext}

    TestYoungWord1:
        desc: 点击少年头条的查看更多，进入头条列表进行文稿用例验证
        steps:
            - pages/app/AppYoungHeadlines.yaml/MoreVoice
            - ${isHeadtext1} = $.getVar('isHeadtext1')
            - assert ${isHeadtext1}

    TestYoungMini:
        desc: 首页播放头条
        steps:
            - pages/app/AppYoungHeadlines.yaml/YoungVioce
            - ${title} = $.getVar('title')
            - ${VoiceText} = $.getVar('VoiceText')
            #断言当前播放的标题是否是头条里面的第一个
            - assert ${VoiceText} == ${title}

    TestOneYoungWord:
        desc: 点击少年头条的查看更多，进入头条列表进行文稿用例验证
        steps:
            - pages/app/AppYoungHeadlines.yaml/MoreOneVoice
            #获取头条列表下的第一个标题名称
            - ${isHeadOnetext} = $.getVar('isHeadOnetext')
            - assert ${isHeadOnetext}

    TestOneSpeedVoice:
        desc: 1倍速进行查看对应时间数是否正确
        steps:
            - pages/app/AppYoungHeadlines.yaml/InVoice
            - pages/app/AppYoungHeadlines.yaml/SwipeWord
            - pages/app/AppYoungHeadlines.yaml/StopVoice
            - pages/app/YoungHeadlineVioce.yaml/OneLabelVoice
            #倍速播放前时间数
            - ${tvCurrentDuration} = $.getVar('tvCurrentDuration')
            #一倍速等待2秒后
            - ${OneLabetvCurrentDuration} = $.getVar('OneLabetvCurrentDuration')
#            - ${newTvCurrentDuration} = goTime(${tvCurrentDuration},2)
            #比较两个时间节点相差多少
            - ${diffOneLabetvCurrentDuration} = compareTime(${tvCurrentDuration},${OneLabetvCurrentDuration})
            - $.setVar('diffOneLabetvCurrentDuration',${diffOneLabetvCurrentDuration})
            - assert ${diffOneLabetvCurrentDuration} >= 2

    TestTwoSpeedVoice:
        desc: 2倍速进行查看对应时间数是否正确
        steps:
            - pages/app/AppYoungHeadlines.yaml/StopVoice
            - pages/app/YoungHeadlineVioce.yaml/TwoLabelVoice
            #倍速播放前时间数
            - ${tvCurrentDuration} = $.getVar('tvCurrentDuration')
            #一倍速等待2秒后
            - ${TwoLabetvCurrentDuration} = $.getVar('TwoLabetvCurrentDuration')
#            - ${newTvCurrentDuration} = goTime(${tvCurrentDuration},2)
            #比较两个时间节点相差多少
            - ${diffTwoLabetvCurrentDuration} = compareTime(${tvCurrentDuration},${TwoLabetvCurrentDuration})
            - $.setVar('diffTwoLabetvCurrentDuration',${diffTwoLabetvCurrentDuration})
            - assert ${diffTwoLabetvCurrentDuration} >= 6

    TestPreVoice:
        desc: 点击播放按钮上一个
        steps:
            - pages/app/AppYoungHeadlines.yaml/StopVoice
            - pages/app/YoungHeadlineVioce.yaml/ListAudio
            - pages/app/YoungHeadlineVioce.yaml/ivPreAudio
            - ${isToast} = isContain(${toast})
            - assert ${isToast}

    TestNextVoice:
        desc: 点击播放按钮下一个
        steps:
            - pages/app/AppYoungHeadlines.yaml/StopVoice
            - pages/app/YoungHeadlineVioce.yaml/ListAudio
            - ${itemTitles} = $.getVar('itemTitles')
            #获取当前播放标题的下标
            - ${nowTitleIndex} = $.getVar('nowTitleIndex')
            - pages/app/YoungHeadlineVioce.yaml/NextAudio
            - ${nextTitle} = $.getVar('nextTitle')
            #获取点击下一个后，当前播放标题的下标
            - ${nextTitleIndex} = $.findIndex(${nextTitle},${itemTitles})
            #对坐标开始进行计算
            - ${index} = $.id(1 + ${nowTitleIndex})
            - assert ${nextTitleIndex} == ${index}

    TestTwoNextVoice:
        desc: 点击播放按钮下一个,2次
        steps:
            - pages/app/AppYoungHeadlines.yaml/StopVoice
            - pages/app/YoungHeadlineVioce.yaml/ListAudio
            - ${itemTitles} = $.getVar('itemTitles')
            #获取当前播放标题的下标
            - ${nowTitleIndex} = $.getVar('nowTitleIndex')
            - pages/app/YoungHeadlineVioce.yaml/NextAudio
            - pages/app/AppYoungHeadlines.yaml/SwipeWord
            - pages/app/AppYoungHeadlines.yaml/StopVoice
            - pages/app/YoungHeadlineVioce.yaml/NextAudio
            - ${nextTitle} = $.getVar('nextTitle')
            #获取点击下一个后，当前播放标题的下标
            - ${TwonextTitleIndex} = $.findIndex(${nextTitle},${itemTitles})
            #对坐标开始进行计算
            - ${index} = $.id(2 + ${nowTitleIndex})
            - assert ${TwonextTitleIndex} == ${index}

    TestFifteenTimeOff:
        desc: 15分钟定时关闭
        steps:
            - pages/app/AppYoungHeadlines.yaml/StopVoice
            - pages/app/YoungHeadlineVioce.yaml/FifteenTimeOff
            - ${tvTimer} = $.getVar('tvTimer')
            - assert '14′' == ${tvTimer}

    TestFinishedTimeOff:
        desc: 播完当前音频定时关闭
        steps:
            - pages/app/AppYoungHeadlines.yaml/StopVoice
            - pages/app/YoungHeadlineVioce.yaml/FinishedTimeOff
            - ${FinishedTvTimer} = $.getVar('FinishedTvTimer')
            - pages/app/YoungHeadlineVioce.yaml/TotalDuration
            - ${TotalMinute} = $.getVar('TotalMinute')
            - ${endTotal} = $.id(${TotalMinute} + '′')
            - pages/app/YoungHeadlineVioce.yaml/CloseTimeOff
            - assert ${endTotal} == ${FinishedTvTimer}

    TestComments:
        desc: 查看精选留言内容
        steps:
            - pages/app/AppYoungHeadlines.yaml/StopVoice
            - pages/app/YoungHeadlineVioce.yaml/CommentNum
            - ${tvCommentNum} = $.getVar('tvCommentNum')
            - pages/app/YoungHeadlineVioce.yaml/CommentPage
            - ${len_contents} = $.getVar('len_contents')
            - assert int(${tvCommentNum}) == ${len_contents}